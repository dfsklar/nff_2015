(function() {
  
  var HALFWIDTH = "317px";
  var FULLWIDTH = "670px";

  var colorRangesForInterleave = 
        [
          chroma.scale([window.nfforg.colors.Blue3, window.nfforg.colors.Blue1]),
          chroma.scale([chroma("#e2e3de"), "#000000"])
        ];
  


  /*
    THIS DEFINES AND ORDERS AND CATEGORIZES ALL CHARTS/TABLES
  */

  window.nfforg.database_unindexed = 

  {
    "sections": {
      "About the Respondents": {
        "showcase": "overview",
        "commentary": "Nonprofit Finance Fund’s annual survey asks nonprofits in the US about their programs, financial health, and management strategies. In this first section is a profile of the core characteristics of respondents, such their state, sector, and size."
      },
      "Demand for Programs/Services": {
        "showcase": "demand",
        "commentary": "Nonprofits understand how the people in their communities are doing. More demand for services suggests that a greater number of people need help than they did the year before. Reports of increase in demand for services have continued since 2008."
      },
      "Financial Story": {
        "showcase": "finanstory",
        commentary: "Every organization has different financial needs. But no matter what you do, it’s critical to have cash in the bank to pay your bills, with some extra left over in case a disaster hits &mdash; whether it’s an economic downturn, hurricane, or broken boiler."
      },
      "Challenges and Responses": {
        "showcase": "challresp",
        "commentary": "Nonprofit managers struggle to implement long-term solutions while fulfilling short-term needs. Nonetheless, they’re improving efficiency, innovating, and saving when they can."
      },
      "Government Funding": {
        showcase: "govfund",
        "commentary": "Our government plays a critical role in protecting us from poverty, hunger, and much more. And it pays nonprofits to carry out many of these services. Unfortunately, government funding comes with hidden costs for many nonprofits."
      },
      "Data and Impact": {
        showcase: "dataimpact",
        "commentary": "The people serving our communities want to do more than cope with social problems. They want to eliminate them. But understanding what works takes significant resources, coordination, and permission from supporters that failure is OK on the road to success."
      },
      "Funder Practices": {
        "showcase": "fundprac",
        "commentary": "What kinds of resources do nonprofits need to succeed? And what are the types of funding that are actually available?"
      },
      "Financial Outlook": {
        "showcase-bar-goes-here": false
      },
      "Lending to Nonprofits": {
        "showcase": "lending",
        "commentary": "Common loans for nonprofits are for facilities, working capital and equipment."
      },
      "Feature: Arts & Culture NPOs": {
        "showcase": "artsculturecount",
        "commentary": "Nonprofits that identified their sector as \“Arts/Culture/Humanities\” received an additional set of sector-specific questions, shown below. This section has been pre-filtered to summarize the responses of only the nonprofits in this sector.  You can narrow the scope of this section even further by adding filters of your own, using the Filter sidebar at the right.",
        "extra-class": "feature"
      },
      "Feature: Trends over Time": {
        "disable-when-filters-on": true,
        "commentary": "Since 2009, we’ve asked a core set of the same questions every year. These responses can draw attention to what has changed or stayed the same over time. For more detail, reach out to us at <a href=\"mailto:survey@nff.org\">survey@nff.org</a>.",
        "extra-class": "feature"
      }
    },




    
    charts: {


      // "abort": { special: "ABORT" },



      "org_type": {
        section: "About the Respondents",
        "title": "Respondents by Sector",
        "title-mini": "Sector",
        "renderer": "bar",
        "highchart_formatting": {
          chart: { marginLeft: 200, spacingLeft: 0 }
        },
        "key_order": [
          "Arts/Culture/Humanities",
          "Community Development",
          "Early Childhood Education",
          "Education",
          "Environment and Animals",
          "Foundation",
          "Health",
          "House of Worship",
          "Human Services",
          "International/Foreign Affairs",
          "Mutual/Membership Benefit",
          "Public/Societal Benefit",
          "Veterans' Services",
          "Workforce Development",
          "Youth Development",
          "Other"
          // ,
          // "Unknown/Unclassified"
        ],
        "value_massager": function(val){
          if (val.has('please speci'))
            return 'Other';
          if (val.has('Arts,'))
            return 'Arts/Culture/Humanities';
          if (val.has('Vetera'))
            return "Veterans' Services";
          if (val.has('Early Chi'))
            return "Early Childhood Education";
          if (val.has('Public,'))
            return 'Public/Societal Benefit';
          if (val.has('Internation'))
            return 'International/Foreign Affairs';
          if (val.has('Youth D'))
            return 'Youth Development';
          if (val.has('Other'))
            return 'Other';
          return val;
        },
        "css": { width: HALFWIDTH }
      },







      "state": {
        "title": "Respondents by State",
        "renderer": "table",
        "css": { width: "317px" }
      },


      "opp_exp_max": {
        "title": "FY2014 Operating Expense",
        "title-mini": "Operating Expense",
        "info-tip": "Operating expense is a useful measure for understanding an organization’s size.",
        "renderer": "bar",
        "value_massager": function(val){
          val = val.replace(",000,000","M");
          val = val.replace(",000,001","M");
          val = val.replace(",000","K");
          val = val.replace(",001","K");
          val = val.replace("-"," -- ").replace("Greater than",">");
          return val;
        },
        "highchart_formatting": {
          chart: { marginLeft: 120, spacingLeft: 0 }
        },
        "key_order": [
          "> $20M",
          "$10M -- $20M",
          "$5M -- $10M",
          "$2M -- $5M",
          "$1M -- $2M",
          "$500K -- $1M",
          "$250K -- $500K",
          "$100K -- $250K",
          "$50K -- $100K",
          "$0 -- $50K"
        ],
        "css": { width: HALFWIDTH }
      },

      "year_founded_range": {
        "title": "Year Founded",
        "title-mini": "Year Founded",
        "renderer": "bar",
        "value_massager": function(val){
          return val.replace('_',' ').replace('> 2010','2010-2014');
        },
        key_order: [
          "1750-1899",
          "1900-1949",
          "1950-1964",
          "1965-1979",
          "1980-1989",
          "1990-1999",
          "2000-2009",
          "2010-2012",
          "2013-2015"
        ],
        "css": { width: HALFWIDTH }
      },

      "lifeline": {
        "title": "Lifeline Organization",
        "renderer": "stacked_single_bar",
        "info-tip": "These organizations identified themselves as providing critical services to people in need.",
        "key_order": [ 'No', 'Yes' ],
        "color_by_key": {
          'Yes': chroma(window.nfforg.colors.YES).hex(),
          'No' : chroma(window.nfforg.colors.NO).hex()
        },
        "css": { width: FULLWIDTH } //, height: "110px" }
      },

      "lmi_serve_expanded": {
        "title": "Serving low-income communities",
        "title-mini": "Serves low-income communities",
        "renderer": "stacked_single_bar",
        "inner_size": "30%",
        "color_by_key": {
          'Exclusively': chroma(window.nfforg.colors.YES).hex(),
          'Primarily': chroma(window.nfforg.colors.MIDDLE).hex(),
          'Neither' : chroma(window.nfforg.colors.NO).hex()
        },
        "value_massager": function(val){
          if (val.has('primarily'))
            return 'Primarily';
          if (val.has('exclusively'))
            return 'Exclusively';
          return 'Neither';
        },
        "key_order": [ 'Neither', 'Primarily', 'Exclusively'],
        "css": { width: FULLWIDTH, height: "110px" }
      },

      "lmi_loc": {
        "title": "Located in low-income communities",
        "title-mini": "Located in low-income community",
        "renderer": "stacked_single_bar",
        "key_order": [ 'No', 'Yes' ],
        "color_by_key": {
          'Yes': chroma(window.nfforg.colors.YES).hex(),
          'No' : chroma(window.nfforg.colors.NO).hex()
        },
        "css": { width: FULLWIDTH, height: "110px" }
      },










      // DEMAND

      "lmi_": {
        "section": "Demand for Programs/Services",
        "title": "NPOs say the most critical community needs are...",
        "highchart_formatting": {
          chart: { marginLeft: 300, spacingLeft: 0 }
        },
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.lmi_),
        "renderer": "one_or_more",
        "value_massager": function(val){
          if (val.has('access to retail'))
            return 'Access to commercial goods and services';
          if (val.has('Recreational'))
            return 'Access to recreational opportunities';
          if (true/*IN DEVELOPMENT*/) {
            // DURING DEVELOPMENT: We want to verify that the returned value is definitely in this chart's official list of keys!
            if ( ! this.key_order.find(val)) {
              console.log("FAILURE: The val " + val + " is not found in the official list of keys for: " + this.title);
            }
          }
          return val;
        },
        "css": { width: FULLWIDTH }
      },

      "past_demand_serv": {
        "title": "In 2013,<br/>service/program demand...",
        "renderer": "bar",
        "highchart_formatting": {
          chart: { marginLeft: 140, spacingLeft: 0 }
        },
        "color_by_key": {
          'significantly increased': chroma(window.nfforg.colors.BADVERY).hex(),
          'slightly increased':  chroma(window.nfforg.colors.BAD).hex(),
          'stayed the same': chroma(window.nfforg.colors.NEUTRAL).hex(),
          'slightly decreased': chroma(window.nfforg.colors.GOOD).hex(),
          'significantly decreased': chroma(window.nfforg.colors.GOODVERY).hex()
        },
        "key_order": [
          'significantly increased', 
          'slightly increased', 
          'stayed the same',
          'slightly decreased', 
          'significantly decreased'
        ],
        "css": { width: HALFWIDTH }
      },

      "met_past_demand_serv": {
        "title": "Able to meet 2013 demand?",
        "renderer": "stacked_single_bar",
        "color_by_key": {
          'Yes': chroma(window.nfforg.colors.DISPARAGINGYES).hex(),
          'No' : chroma(window.nfforg.colors.DISPARAGINGNO).hex()
        },
        "css": { width: HALFWIDTH, height: "120px" }
      },

      "fut_demand_serv": {
        "title": "In 2014, service/program<br/>demand will...",
        "renderer": "bar",
        "value_massager": function(val){
          return val.replace('will ','');
        },
        "highchart_formatting": {
          chart: { marginLeft: 140, spacingLeft: 0 }
        },
        "color_by_key": {
          'significantly increase': chroma(window.nfforg.colors.BADVERY).hex(),
          'slightly increase':  chroma(window.nfforg.colors.BAD).hex(),
          'stay the same': chroma(window.nfforg.colors.NEUTRAL).hex(),
          'slightly decrease': chroma(window.nfforg.colors.GOOD).hex(),
          'significantly decrease': chroma(window.nfforg.colors.GOODVERY).hex()
        },
        "key_order": [
          'significantly increase',
          'slightly increase', 
          'stay the same',
          'slightly decrease', 
          'significantly decrease'
        ],
        "css": { width: HALFWIDTH }
      },

      "meet_fut_demand_serv": {
        "title": "Will be able to meet<br/>2014 demand?",
        "renderer": "stacked_single_bar",
        "color_by_key": {
          'Yes': chroma(window.nfforg.colors.DISPARAGINGYES).hex(),
          'No' : chroma(window.nfforg.colors.DISPARAGINGNO).hex()
        },
        "css": { width: HALFWIDTH, height: "120px" }
      },






      // FINANCIAL STORY


      "surplus_deficit_prior": {
        "section": "Financial Story",
        "css": { width: "317px" },
        "title": "Ended FY'14 with...",
        "renderer": "bar",
        "highchart_formatting": {
          chart: { marginLeft: 140, spacingLeft: 0 }
        },
        "value_massager": function(val) {
          if (val.has('break-even'))
            return 'break-even financials';
          return val;
        },
        "key_order": [
          'operating surplus',
          'break-even financials',
          'operating deficit'
        ],
        "css": { width: HALFWIDTH }
      },

      "surplus_deficit_current": {
        "css": { width: "317px" },
        "title": "Anticipate ending FY'15 with...",
        "renderer": "bar",
        "highchart_formatting": {
          chart: { marginLeft: 140, spacingLeft: 0 }
        },
        "value_massager": function(val) {
          if (val.has('break-even'))
            return 'break-even financials';
          return val;
        },
        "key_order": [
          'operating surplus',
          'break-even financials',
          'operating deficit',
          'unable to predict'
        ]
      },

      "months_cash": {
        "title": "Months of Cash<br/>Readily Available",
        "info-tip": "The number of months the organization could operate with current cash reserves. The cash position at some point in time (usually at fiscal year end) divided by the average monthly operating expense before depreciation.",
        "renderer": "bar",
        "value_massager": function(val) {
          return val.replace(' of cash','').replace('More than','>').replace('Less than','<');
        },
        "highchart_formatting": {
          chart: { marginLeft: 90, spacingLeft: 0 }
        },
        "key_order": [
          '> 6 months',
          '6 months',
          '5 months',
          '4 months',
          '3 months',
          '2 months',
          '1 month',
          '< 1 month'
        ],
        "css": { width: HALFWIDTH }
      },

      "surplus_prior_perc": {
        "title": "% Surplus/Deficit for FY'14",
        "info-tip": "Organizations were asked to share the size of their surpluses or deficits.",
        "renderer": "bar",
        "highchart_formatting": {
          chart: { marginLeft: 125, spacingLeft: 0 }
        },
        "value_massager": function(val) {
          if (!(val.has("deficit")))
            val = "surplus " + val;
          val = val.replace('.01','').replace('greater than','>');
          return val;
        },
        "color_by_key": {
          'surplus > 25%': chroma(window.nfforg.colors.GOODVERY).hex(),
          'surplus 10%-25%': chroma(window.nfforg.colors.GOODVERY).hex(),
          'surplus 5%-10%': chroma(window.nfforg.colors.GOOD).hex(),
          'surplus 1%-5%': chroma(window.nfforg.colors.GOOD).hex(),
          'surplus 1% or less':  chroma(window.nfforg.colors.NEUTRAL).hex(),
          'deficit 1% or less':  chroma(window.nfforg.colors.NEUTRAL).hex(),
          'deficit 1%-5%': chroma(window.nfforg.colors.BAD).hex(),
          'deficit 5%-10%': chroma(window.nfforg.colors.BAD).hex(),
          'deficit 10%-25%': chroma(window.nfforg.colors.BADVERY).hex(),
          'deficit > 25%': chroma(window.nfforg.colors.BADVERY).hex()
        },
        "key_order": [
          'surplus > 25%',
          'surplus 10%-25%',
          'surplus 5%-10%',
          'surplus 1%-5%',
          'surplus 1% or less',
          'deficit 1% or less',
          'deficit 1%-5%',
          'deficit 5%-10%',
          'deficit 10%-25%',
          'deficit > 25%'
        ],
        "css": { width: HALFWIDTH }
      },











      // CHALLENGES AND RESPONSES


      "challenge_": {
        "section": "Challenges and Responses",
        "title": "Greatest Challenges", // ... that my ORGANIZATION is facing
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.challenge_),
        "renderer": "one_or_more",
        "highchart_formatting": {
          chart: { marginLeft: 320, spacingLeft: 0 }
        },
        "css": { width: FULLWIDTH }
      },


      "action_staff": {
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.action_staff),
        "title": "Human Capital: Actions Taken and Planned",
        "renderer": "actions_planned_taken",
        "css": { width: FULLWIDTH }
      },


      "action_prog_service": {
        "title": "Programs and Services: Actions Taken and Planned",
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.action_prog_service),
        "renderer": "actions_planned_taken",
        "css": { width: FULLWIDTH }
      },

      "action_ops_finance": {
        "title": "Finance and Operations: Actions Taken and Planned",
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.action_ops_finance),
        "renderer": "actions_planned_taken",
        "css": { width: FULLWIDTH }
      },






      // GOV'T FUNDING

      "gov_payment_sources_": {
        "section": "Government Funding",
        "title": "Respondents reported government Funding/Contracts from...",
        "highchart_formatting": {
          chart: { marginLeft: 140, spacingLeft: 0 }
        },
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.gov_payment_sources_),
        "renderer": "one_or_more",
        "css": { width: FULLWIDTH }
      },





      "funding_gov_days_late": {
        "title": "Gov’t payments are received...",
        "renderer": "barset",
        "show-percentage-only": true,
        "title-subchart": "FEDERAL",
        "value_massager": function(val) {
          return val.replace('scheduled payment date','schedule').replace("More than", ">");
        },
        "highchart_formatting": {
          chart: { marginLeft: 130, spacingLeft: 0 }
        },
        "color_by_key": {
          'Ahead of schedule': chroma(window.nfforg.colors.GOODVERY).hex(),
          'On schedule': chroma(window.nfforg.colors.GOOD).hex(),
          '1-30 days late': chroma(window.nfforg.colors.NEUTRAL).hex(),
          '31-90 days late': chroma(window.nfforg.colors.BAD).hex(),
          '> 90 days late': chroma(window.nfforg.colors.BADVERY).hex()
        },
        "key_order": [
          'Ahead of schedule',
          'On schedule',
          '1-30 days late',
          '31-90 days late',
          '> 90 days late'
        ],
        "css": { width: FULLWIDTH },
        "otherCharts": [ "funding_gov_state_days_late", "funding_gov_loc_days_late"]
      },

      "funding_gov_state_days_late": {
        "show-percentage-only": true,
        "title": "When receive<br/>STATE payments",
        "title-subchart": "STATE",
        "renderer": "none",  // Merged with FEDERAL by the barset renderer
        "value_massager": function(val) {
          return val.replace('scheduled payment date','schedule');
        },
        "highchart_formatting": {
          chart: { marginLeft: 330, spacingLeft: 0, marginRight: 200 }
        },
        "color_by_key": {
          'Ahead of schedule': chroma(window.nfforg.colors.GOODVERY).hex(),
          'On schedule': chroma(window.nfforg.colors.GOOD).hex(),
          '1-30 days late': chroma(window.nfforg.colors.NEUTRAL).hex(),
          '31-90 days late': chroma(window.nfforg.colors.BAD).hex(),
          'More than 90 days late': chroma(window.nfforg.colors.BADVERY).hex()
        },
        "key_order": [
          'Ahead of schedule',
          'On schedule',
          '1-30 days late',
          '31-90 days late',
          'More than 90 days late'
        ],
        "css": { width: HALFWIDTH }
      },

      "funding_gov_loc_days_late": {
        "show-percentage-only": true,
        "section": "Government Funding",
        "title": "When receive<br/>LOCAL payments",
        "title-subchart": "LOCAL",
        "renderer": "none",
        "value_massager": function(val) {
          return val.replace('scheduled payment date','schedule');
        },
        "highchart_formatting": {
          chart: { marginLeft: 130, spacingLeft: 0 }
        },
        "color_by_key": {
          'Ahead of schedule': chroma(window.nfforg.colors.GOODVERY).hex(),
          'On schedule': chroma(window.nfforg.colors.GOOD).hex(),
          '1-30 days late': chroma(window.nfforg.colors.NEUTRAL).hex(),
          '31-90 days late': chroma(window.nfforg.colors.BAD).hex(),
          'More than 90 days late': chroma(window.nfforg.colors.BADVERY).hex()
        },
        "key_order": [
          'Ahead of schedule',
          'On schedule',
          '1-30 days late',
          '31-90 days late',
          'More than 90 days late'
        ],
        "css": { width: HALFWIDTH }
      },



      "funding_all_gov_delay_": {
        "title": "How NPOs manage government payment delays",
//        "denominator_required_field": "funding_gov_",
//        "denominator_required_field__negative_values": [ "none" ],
        "renderer": "one_or_more",
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.funding_all_gov_delay_),
        "highchart_formatting": {
          chart: { marginLeft: 360, spacingLeft: 0 }
        },
        "css": { width: FULLWIDTH }
      },





      "aicr_fed_range": {
        "title": "Average indirect cost rate paid by government",
        "info-tip": "This graph represents the average allowable indirect cost rate (AICR) or overhead/administrative cost rate that nonprofits say the government covers when they receive a contract or grant. Every organization must budget for overhead, which includes things like facility maintenance, phones, savings, and all the diffused costs that aren’t strictly tied to program delivery.",
        "renderer": "barset",
        "show-percentage-only": true,
        "title-subchart": "FEDERAL",
        "highchart_formatting": {
          chart: { marginLeft: 130, spacingLeft: 0 }
        },
        value_massager: function(val) {
          if (val=="9-Apr")
            return "4-9%";
          if (val=="15-Oct")
            return "10-15%";
          return val;  //.replace('_',' ')+"%";
        },
        "key_order": [ '0-3%', '4-9%', '10-15%', '16-25%', '26-50%', '> 51%' ],
        "otherCharts": [ "aicr_state_range", "aicr_loc_range"],
        "css": { width: FULLWIDTH }
      },
      "aicr_state_range": {
        "title": "Average indirect cost rate<br/>paid by State gov't",
        "show-percentage-only": true,
        "title-subchart": "STATE",
        "info-tip": "This graph represents the average allowable indirect cost rate (AICR) or overhead/administrative cost rate that nonprofits say the government covers when they receive a contract or grant. Every organization must budget for overhead, which includes things like facility maintenance, phones, savings, and all the diffused costs that aren’t strictly tied to program delivery.",
        "renderer": "none",
        value_massager_NOTNEEDED: function(val) {
          if (val=="9-Apr")
            return "4-9%";
          if (val=="15-Oct")
            return "10-15%";
          return val.replace('_',' ')+"%";
        },
        "key_order": [ '0-3%', '4-9%', '10-15%', '16-25%', '26-50%', '> 51%' ],
        "css": { width: HALFWIDTH }
      },
      "aicr_loc_range": {
        "title": "Average indirect cost rate<br/>paid by Local gov't",
        "show-percentage-only": true,
        "title-subchart": "LOCAL",
        "renderer": "none",
        value_massager_NOTNEEDED: function(val) {
          if (val=="9-Apr")
            return "4-9%";
          if (val=="15-Oct")
            return "10-15%";
          return val.replace('_',' ')+"%";
        },
        "key_order": [ '0-3%', '4-9%', '10-15%', '16-25%', '26-50%', '> 51%' ],
        "css": { width: HALFWIDTH }
      },





      // AICR TRENDING
      // In last 5 years, average indirect cost rate paid by government has...

      "aicr_fed_trend": {
        "title--notsure": "In last 3 years, average indirect cost rate paid by government has...",
        "title": "In last 5 years, my NPO's gov't funding has...",
        "info-tip": "This graph represents recent trends in the average allowable indirect cost rate (AICR) or overhead/administrative cost rate that nonprofits say the government covers when they receive a contract or grant. Every organization must budget for overhead, which includes things like facility maintenance, phones, savings, and all the diffused costs that aren’t strictly tied to program delivery.",
        "renderer": "barset",
        "show-percentage-only": true,
        "title-subchart": "FEDERAL",
        "key_order": [ 'Increased', 'Stayed the Same', 'Decreased' ],
        "color_by_key": {
          'Increased': chroma(window.nfforg.colors.GOODVERY).hex(),
          'Stayed the Same': chroma(window.nfforg.colors.NEUTRAL).hex(),
          'Decreased': chroma(window.nfforg.colors.BADVERY).hex()
        },
        "highchart_formatting": {
          chart: { marginLeft: 130, spacingLeft: 0 }
        },
        "otherCharts": [ "aicr_state_trend", "aicr_loc_trend"],
        "css": { width: FULLWIDTH }
      },
      "aicr_state_trend": {
        "title": "Average indirect cost rate<br/>paid by State gov't",
        "show-percentage-only": true,
        "key_order": [ 'Increased', 'Stayed the Same', 'Decreased' ],
        "title-subchart": "STATE",
        "color_by_key": {
          'Increased': chroma(window.nfforg.colors.GOODVERY).hex(),
          'Stayed the Same': chroma(window.nfforg.colors.NEUTRAL).hex(),
          'Decreased': chroma(window.nfforg.colors.BADVERY).hex()
        },
        "info-tip": "This graph represents the average allowable indirect cost rate (AICR) or overhead/administrative cost rate that nonprofits say the government covers when they receive a contract or grant. Every organization must budget for overhead, which includes things like facility maintenance, phones, savings, and all the diffused costs that aren’t strictly tied to program delivery.",
        "renderer": "none",
        "css": { width: HALFWIDTH }
      },
      "aicr_loc_trend": {
        "title": "Average indirect cost rate<br/>paid by Local gov't",
        "show-percentage-only": true,
        "key_order": [ 'Increased', 'Stayed the Same', 'Decreased' ],
        "color_by_key": {
          'Increased': chroma(window.nfforg.colors.GOODVERY).hex(),
          'Stayed the Same': chroma(window.nfforg.colors.NEUTRAL).hex(),
          'Decreased': chroma(window.nfforg.colors.BADVERY).hex()
        },
        "title-subchart": "LOCAL",
        "renderer": "none",
        "css": { width: HALFWIDTH }
      },



      "plan_replace_gov_funding_fed": {
        "title": "Plan to replace gov't funding with non-gov't funding",
        "renderer": "barset",
        "show-percentage-only": true,
        "title-subchart": "FEDERAL",
        "key_order": [ 'Yes', 'No' ],
        "color_by_key": {
          'No': chroma(window.nfforg.colors.GOODVERY).hex(),
          'Yes': chroma(window.nfforg.colors.BADVERY).hex()
        },
        "highchart_formatting": {
          chart: { marginLeft: 130, spacingLeft: 0 }
        },
        "otherCharts": [ "plan_replace_gov_funding_state", "plan_replace_gov_funding_loc"],
        "css": { width: FULLWIDTH }
      },
      "plan_replace_gov_funding_state": {
        "title": "Plan to replace gov't funding with non-gov't funding",
        "renderer": "none",
        "show-percentage-only": true,
        "title-subchart": "STATE",
        "key_order": [ 'Yes', 'No' ],
        "color_by_key": {
          'No': chroma(window.nfforg.colors.GOODVERY).hex(),
          'Yes': chroma(window.nfforg.colors.BADVERY).hex()
        },
        "css": { width: HALFWIDTH }
      },
      "plan_replace_gov_funding_loc": {
        "title": "Plan to replace gov't funding with non-gov't funding",
        "renderer": "none",
        "show-percentage-only": true,
        "title-subchart": "LOCAL",
        "key_order": [ 'Yes', 'No' ],
        "color_by_key": {
          'No': chroma(window.nfforg.colors.GOODVERY).hex(),
          'Yes': chroma(window.nfforg.colors.BADVERY).hex()
        },
        "css": { width: HALFWIDTH }
      },




//      "funding_fed_trend": {
//        "title": "In last 5 years, my NPO's gov't funding has...",
//        "title-subchart": "FEDERAL",
//        "highchart_formatting": {
//          chart: { marginLeft: 130, spacingLeft: 0 }
//        },
//        "renderer": "barset",
//        "show-percentage-only": true,
//        "key_order": [
//          'Increased',
//          'Stayed the Same',
//          'Declined'
//        ],
//        "color_by_key": {
//          'Increased': chroma(window.nfforg.colors.GOODVERY).hex(),
//          'Stayed the Same': chroma(window.nfforg.colors.NEUTRAL).hex(),
//          'Declined': chroma(window.nfforg.colors.BADVERY).hex()
//        },
//        otherCharts: [ 'funding_state_trend', 'funding_loc_trend' ],
//        "css": { width: FULLWIDTH }
//      },
//
//      "funding_state_trend": {
//        "title": "In last 5 years, my NPO's<br/>State funding has...",
//        "show-percentage-only": true,
//        "title-subchart": "STATE",
//        "renderer": "none",
//        "key_order": [
//          'Increased',
//          'Stayed the Same',
//          'Declined'
//        ],
//        "color_by_key": {
//          'Increased': chroma(window.nfforg.colors.GOODVERY).hex(),
//          'Stayed the Same': chroma(window.nfforg.colors.NEUTRAL).hex(),
//          'Declined': chroma(window.nfforg.colors.BADVERY).hex()
//        },
//        "css": { width: HALFWIDTH }
//      },
//
//      "funding_loc_trend": {
//        "title": "In last 5 years, my NPO's<br/>Local funding has...",
//        "show-percentage-only": true,
//        "title-subchart": "LOCAL",
//        "renderer": "none",
//        "key_order": [
//          'Increased',
//          'Stayed the Same',
//          'Declined'
//        ],
//        "color_by_key": {
//          'Increased': chroma(window.nfforg.colors.GOODVERY).hex(),
//          'Stayed the Same': chroma(window.nfforg.colors.NEUTRAL).hex(),
//          'Declined': chroma(window.nfforg.colors.BADVERY).hex()
//        },
//        "css": { width: HALFWIDTH }
//      },



      'funding_reporting_hours_range': {
        "title": "Hours-per-month spent managing government grants/contracts",
        "renderer": "bar",
        "info-tip": "These hours per month are <i>not</i> time spent on delivering services to people in need. Instead, it represents the time the entire staff spends on applications, reports, documentation, and other administration activities.",
        value_massager: function(val) {
          if (val=="19-Oct")
            return "10-19";
          return val.replace('_',' ');
        },
        "key_order": [
          "0-9",
          "10-19",
          "20-29",
          "30-39",
          "40-49",
          "50-59",
          "60-69",
          "70-79",
          "80-89",
          "90-99",
          "100-150",
          "151-299",
          "> 300"
        ],
        "css": { width: FULLWIDTH }
      },










      // DATA AND IMPACT

      "impact_action_eval": {
        "section": "Data and Impact",
        "title": "Uses external evaluator<br/>to assess effectiveness",
        "renderer": "bar",
        "key_order": [
          "Regularly",
          "Sometimes",
          "Rarely",
          "Never"
        ],
        "css": { width: HALFWIDTH }
      },
      "impact_action_prog_data": {
        "title": "Collects data on<br/>program productivity",
        "renderer": "bar",
        "key_order": [
          "Regularly",
          "Sometimes",
          "Rarely",
          "Never"
        ],
        "css": { width: HALFWIDTH }
      },
      "impact_action_lives_data": {
        "title": "Collects long-term data on<br/>impact on clients",
        "renderer": "bar",
        "key_order": [
          "Regularly",
          "Sometimes",
          "Rarely",
          "Never"
        ],
        "css": { width: HALFWIDTH }
      },
      "impact_action_cmty_data": {
        "title": "Collects long-term data on<br/>impact on communities",
        "renderer": "bar",
        "key_order": [
          "Regularly",
          "Sometimes",
          "Rarely",
          "Never"
        ],
        "css": { width: HALFWIDTH }
      },
      
      "impact_funder_request": {
        "title": "# of Funders asking for<br/>impact metrics in reports",
        "renderer": "bar",
        "key_order": [
          "All",
          "Half or more",
          "Less than half",
          "None"
        ],
        "value_massager": function(val){
          return val.replace(' of our funders','');
        },
        "css": { width: HALFWIDTH }
      },

      "impact_funder_metrics": {
        "title": "\"Do metrics funders ask for<br/>help us assess impact?\"",
        "renderer": "bar",
        "key_order": [
          "Strongly Agree",
          "Mostly Agree",
          "Somewhat Agree",
          "Somewhat Disagree",
          "Mostly Disagree",
          "Strongly Disagree"
        ],
        "highchart_formatting": {
          chart: { marginLeft: 150, spacingLeft: 0 }
        },
        "css": { width: HALFWIDTH }
      },

      "impact_funder_cost": {
        "title": "How often do funders cover <br/>costs of impact measurement?",
        "key_order": [
          "Always",
          "Often",
          "Sometimes",
          "Rarely",
          "Never"
        ],
        "renderer": "bar",
        "css": { width: HALFWIDTH }
      },

      "data_collect_": {
        "title": "Top Barriers to impact measurement",
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.data_collect_),
        "highchart_formatting": {
          chart: { marginLeft: 425, spacingLeft: 0 }
        },
        "value_massager": function(val){
          if (val.has('not sure'))
            return 'Not sure';
          return val;
        },
        "renderer": "one_or_more",
        "css": { width: FULLWIDTH }
      },




      "funding_vs_reporting_fed": {
        "show-percentage-only": true,
        "title": "Reporting Requirements in relation to the funding amounts",
        "title-subchart": "Federal",
        otherCharts: [ 
          "funding_vs_reporting_state",
          "funding_vs_reporting_local",
          "funding_vs_reporting_foundation",
          "funding_vs_reporting_individual"
        ],
        value_massager: function(val){
          if (val.has('N/A'))
            return 'N/A';
          return val;
        },
        "key_order": [
          "High",
          "Proportional",
          "Low",
          "N/A"
        ],
        "renderer": "barset2",
        "css": { width: FULLWIDTH }
      },
      "funding_vs_reporting_state": {
        "show-percentage-only": true,
        "title": "Reporting Requirements in relation to the funding amounts",
        "title-subchart": "State",
        "renderer": "none",
        value_massager: function(val){
          if (val.has('N/A'))
            return 'N/A';
          return val;
        },
        "key_order": [
          "High",
          "Proportional",
          "Low",
          "N/A"
        ],
        "css": { width: FULLWIDTH }
      },
      "funding_vs_reporting_local": {
        "show-percentage-only": true,
        "title": "Reporting Requirements in relation to the funding amounts",
        "title-subchart": "Local",
        "renderer": "none",
        value_massager: function(val){
          if (val.has('N/A'))
            return 'N/A';
          return val;
        },
        "key_order": [
          "High",
          "Proportional",
          "Low",
          "N/A"
        ],
        "css": { width: FULLWIDTH }
      },
      "funding_vs_reporting_foundation": {
        "show-percentage-only": true,
        "title": "Reporting Requirements in relation to the funding amounts",
        "title-subchart": "Foundation",
        "renderer": "none",
        value_massager: function(val){
          if (val.has('N/A'))
            return 'N/A';
          return val;
        },
        "key_order": [
          "High",
          "Proportional",
          "Low",
          "N/A"
        ],
        "css": { width: FULLWIDTH }
      },
      "funding_vs_reporting_individual": {
        "show-percentage-only": true,
        "title": "Reporting Requirements in relation to the funding amounts",
        "title-subchart": "Individual",
        "renderer": "none",
        value_massager: function(val){
          if (val.has('N/A'))
            return 'N/A';
          return val;
        },
        "key_order": [
          "High",
          "Proportional",
          "Low",
          "N/A"
        ],
        "css": { width: FULLWIDTH }
      },






      // FUNDER PRACTICES

      "dialog_": {
        "section": "Funder Practices",
        "title": "My NPO can have open dialogue with funders about...",
        "renderer": "one_or_more",
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.dialog_),
        "highchart_formatting": {
          chart: { marginLeft: 350, spacingLeft: 0 }
        },
        "css": { width: FULLWIDTH }
      },




      // NEXT SET OF CHARTS IS COMBINED INTO ONE MULTI-SERIES BAR CHART
      // NEXT SET OF CHARTS IS COMBINED INTO ONE MULTI-SERIES BAR CHART
      // NEXT SET OF CHARTS IS COMBINED INTO ONE MULTI-SERIES BAR CHART
      "funding_fed_full_cost": {
        "show-percentage-only": true,
        "title": "How often do funders cover the full cost of projects they fund?",
        "usagetip": "TIP: Click on any option in the legend to turn off its visibility.",
        "title-subchart": "Federal",
        otherCharts: [ 
          "funding_state_full_cost", 
          "funding_loc_full_cost", 
          "funding_foundation_full_cost", 
          "funding_individual_full_cost"
        ],
        value_massager: function(val){
          if (val.has('N/A'))
            return 'N/A';
          return val;
        },
        "key_order": [
          "Always",
          "Often",
          "Sometimes",
          "Rarely",
          "Never",
          "N/A"
        ],
        "renderer": "barset2",
        "css": { width: FULLWIDTH }
      },
      "funding_state_full_cost": {
        "show-percentage-only": true,
        "title": "How often do states <br/>cover the full costs of programs they fund?",
        "title-subchart": "State",
        value_massager: function(val){
          if (val.has('N/A'))
            return 'N/A';
          return val;
        },
        "key_order": [
          "Always",
          "Often",
          "Sometimes",
          "Rarely",
          "Never",
          "N/A"
        ],
        "renderer": "none",
        "css": { width: FULLWIDTH }
      },

      "funding_loc_full_cost": {
        "show-percentage-only": true,
        "title": "How often do localities <br/>cover the full costs of programs they fund?",
        "title-subchart": "Local",
        value_massager: function(val){
          if (val.has('N/A'))
            return 'N/A';
          return val;
        },
        "key_order": [
          "Always",
          "Often",
          "Sometimes",
          "Rarely",
          "Never",
          "N/A"
        ],
        "renderer": "none",
        "css": { width: FULLWIDTH }
      },

      "funding_foundation_full_cost": {
        "show-percentage-only": true,
        "title": "How often do private/community organizations <br/>cover the full costs of programs they fund?",
        "title-subchart": "Foundation",
        value_massager: function(val){
          if (val.has('N/A'))
            return 'N/A';
          return val;
        },
        "key_order": [
          "Always",
          "Often",
          "Sometimes",
          "Rarely",
          "Never",
          "N/A"
        ],
        "renderer": "none",
        "css": { width: FULLWIDTH }
      },

      "funding_individual_full_cost": {
        "show-percentage-only": true,
        "title": "How often do individuals <br/>cover the full costs of programs they fund?",
        "title-subchart": "Individual",
        value_massager: function(val){
          if (val.has('N/A'))
            return 'N/A';
          return val;
        },
        "key_order": [
          "Always",
          "Often",
          "Sometimes",
          "Rarely",
          "Never",
          "N/A"
        ],
        "renderer": "none",
        "css": { width: FULLWIDTH }
      },




      expense_gos_perc_range: {
        title: "% annual operating expense<br/>covered by general operating support",
        "info-tip": "General operating support is income that can be used flexibly, without restrictions defined by the funding source.",
        renderer: "bar",
        value_massager: function(val) {
          if (val=="20-Nov")
            return "11-20%";
          if (val=="15-Jun")
            return "6-15%";
          return val.replace('_',' ')+"%";
        },
        key_order: [
          "0-10%",
          "11-20%",
          "21-30%",
          "31-40%",
          "41-50%",
          "51-60%",
          "61-70%",
          "71-80%",
          "81-90%",
          "91-100%"
        ],
        "css": { width: HALFWIDTH }
      },





      // FINANCIAL OUTLOOK

      "current_year_client_outlook": {
        "section": "Financial Outlook",
        "title": "2015 Outlook for the<br/>Community the NPO Serves",
        "renderer": "bar",
        "key_order": [ 
          'Harder than 2013', 
          'More or less the same as 2013', 
          'Easier than 2013'
        ],
        "highchart_formatting": {
          chart: { marginLeft: 180, spacingLeft: 0 }
        },
        "css": { width: HALFWIDTH }
      },

      "current_year_org_outlook_": {
        "title": "2015 Outlook for the NPO<br/>&nbsp;",
        "renderer": "one_or_more",
        // "renderer": "bar",
        "highchart_formatting": {
          chart: { marginLeft: 180, spacingLeft: 0 }
        },
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.current_year_org_outlook_),
        "css": { width: HALFWIDTH }
      },






      // LENDING TO NONPROFITS

      "debt_fin": {
        "section": "Lending to Nonprofits",
        "title": "Has loan or line of credit",
        "renderer": "stacked_single_bar",
        "key_order": [ 'No', 'Yes' ],
        "color_by_key": {
          'Yes': chroma(window.nfforg.colors.YES).hex(),
          'No' : chroma(window.nfforg.colors.NO).hex()
        },
        "css": { width: HALFWIDTH, height: "110px" }
      },

      "debt_fin_amt": {
        "title": "Amount of outstanding debt<br/>or line of credit",
        "denominator_required_field": "debt_fin",
        "denominator_required_field__negative_values": [ "No" ],
        "renderer": "bar",
        "value_massager": function(val){
          val = val.replace(",000,000","M");
          val = val.replace(",000,001","M");
          val = val.replace(",000","K");
          val = val.replace(",001","K");
          val = val.replace("-"," -- ").replace("Greater than",">");
          return val;
        },
        "highchart_formatting": {
          chart: { marginLeft: 120, spacingLeft: 0 }
        },
        "key_order": [
          "> $10M",
          "$5M -- $10M",
          "$2M -- $5M",
          "$1M -- $2M",
          "$500K -- $1M",
          "$250K -- $500K",
          "$100K -- $250K",
          "$50K -- $100K",
          "$0 -- $50K"
        ],
        "css": { width: HALFWIDTH }
      },

      "addtl_debt_fin": {
        "title": "Needs or anticipates<br/>additional debt/financing",
        "renderer": "stacked_single_bar",
        "key_order": [ 'No', 'Yes' ],
        "color_by_key": {
          'Yes': chroma(window.nfforg.colors.YES).hex(),
          'No' : chroma(window.nfforg.colors.NO).hex()
        },
        "css": { width: HALFWIDTH, height: "110px" }
      },

      "addtl_debt_fin_amt": {
        "title": "Amount of additional debt",
        "title-mini": "Operating Expense",
        "renderer": "bar",
        "value_massager": function(val){
          val = val.replace(",000,000","M");
          val = val.replace(",000,001","M");
          val = val.replace(",000","K");
          val = val.replace(",001","K");
          val = val.replace("-"," -- ").replace("Greater than",">");
          return val;
        },
        "highchart_formatting": {
          chart: { marginLeft: 120, spacingLeft: 0 }
        },
        "key_order": [
          "> $10M",
          "$5M -- $10M",
          "$2M -- $5M",
          "$1M -- $2M",
          "$500K -- $1M",
          "$250K -- $500K",
          "$100K -- $250K",
          "$50K -- $100K",
          "$0 -- $50K"
        ],
        "css": { width: HALFWIDTH }
      },

      "addtl_debt_fin_use_": {
        "title": "Planned Uses of additional debt",
        "renderer": "one_or_more",
        "denominator_required_field": "addtl_debt_fin",
        "denominator_required_field__negative_values": [ "No" ],
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.addtl_debt_fin_use_),
        "highchart_formatting": {
          chart: { marginLeft: 300, spacingLeft: 0 }
        },
        "css": { width: FULLWIDTH }
      },

      "debt_fin_no_": {
        "title": "Reasons an NPO currently has no debt",
        "renderer": "one_or_more",
        //"denominator_required_field": "loan_yn",
        //"denominator_required_field__negative_values": [ "No" ],
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.debt_fin_no_),
        "highchart_formatting": {
          chart: { marginLeft: 340, spacingLeft: 0 }
        },
        "css": { width: FULLWIDTH }
      },


/*
      "loan_want_": {
        "title": "NPOs without a loan/line of credit want it to...",
        special: "INTERNAL",
        "denominator_required_field": "loan_no_",
        "denominator_required_field__negative_values": [ "need", "unsure_use" ],
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.loan_want_),
        "renderer": "one_or_more",
        "highchart_formatting": {
          chart: { marginLeft: 340, spacingLeft: 0 }
        },
        "css": { width: FULLWIDTH }
      },
*/








      "arts_org_type": {
        "section": "Feature: Arts & Culture NPOs",
        "denominator_required_field": "arts_org_type",
        "title": "Arts & Culture: Respondents by Sub-Sector",
        "renderer": "bar",
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.arts_org_type),
        "value_massager": function(val){
          return val
            .replace(/^Visual.*non-museum/, "Visual art / craft - non-museum")
            .replace(/^Music.*non-orchestra/, "Music - non-orchestra")
            .replace(/, please specify/, "")
            .replace("and/or", "/")
            .replace("Other", "Other arts/culture/humanities")
            .replace(/:/, "")
          ;
        },
        "css": { width: FULLWIDTH }
      },

      "arts_action_staff": {
        "denominator_required_field": "arts_org_type",
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.arts_action_staff),
        "title": "Arts & Culture: Human Capital Actions Taken and Planned",
        "usagetip": "This survey question was presented to all NPOs across all sectors (see the 'Challenges and Responses' section above).  However, Arts/Culture/Humanities respondents received additional options related to their management of artists. Below, you’ll see this group's responses to these sector-specific options in addition to their responses to the full set.",
        "renderer": "actions_planned_taken",
        "css": { width: FULLWIDTH }
      },

      "arts_aud_": {
        "denominator_required_field": "arts_org_type",
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.arts_aud_),
        "title": "Arts & Culture: In 2013, my NPO made meaningful investment in <br/>the following audience/visitor development strategies",
        "renderer": "one_or_more",
        "highchart_formatting": {
          chart: { marginLeft: 450, spacingLeft: 0 }
        },
        "value_massager": function(val){
          return val.replace(", please explain","");
        },
        "css": { width: FULLWIDTH }
      },

      "arts_aud_rslts_": {
        "denominator_required_field": "arts_aud_",
        "denominator_required_field__negative_values": [ "none" ],
        "title": "Arts & Culture: Result of investments in <br/>audience/visitor development strategies",
        "renderer": "one_or_more",
        "highchart_formatting": {
          chart: { marginLeft: 450, spacingLeft: 0 }
        },
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.arts_aud_rslts_),
        NONEED_value_massager: function(val){
          if (val.has('know'))
            return val; //return "Don't know";
          else
            return val.replace(", please explain","");
        },
        "css": { width: FULLWIDTH }
      },

      "arts_comp_": {
        "denominator_required_field": "arts_org_type",
        "title": "Arts & Culture: Impact of increased competition in the arts & culture marketplace",
        "renderer": "one_or_more",
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.arts_comp_),
        "info-tip": "Building and retaining audiences/visitors can be stymied by increased competition from new cultural organizations, free artistic alternatives or non-arts options. Are arts &amp; culture nonprofits feeling any effects from increased competition?",
        "highchart_formatting": {
          chart: { marginLeft: 280, spacingLeft: 0 }
        },
        "css": { width: FULLWIDTH }
      },

      "arts_comp_resp_": {
        "denominator_required_field": "arts_comp_",
        "denominator_required_field__negative_values": [ "none" ],
        "title": "Arts & Culture: How did NPOs experiencing increased competition<br/>respond to it?",
        "renderer": "one_or_more",
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.arts_comp_resp_),
        "highchart_formatting": {
          chart: { marginLeft: 320, spacingLeft: 0 }
        },
        "value_massager": function(val){
          if (val.has('know'))
            return "Don't know";
          else
            return val.replace(", please explain","");
        },
        "css": { width: FULLWIDTH }
      },

      "arts_funding_": {
        "denominator_required_field": "arts_org_type",
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.arts_funding_),
        title: "Arts & Culture: In 2013, my NPO received funding for...",
        "renderer": "one_or_more",
        "highchart_formatting": {
          chart: { marginLeft: 340, spacingLeft: 0 }
        },
        "css": { width: FULLWIDTH }
      },

      "arts_grants_": {
        "denominator_required_field": "arts_org_type",
        "title": "Arts & Culture: Grantmaking practices experienced in 2014",
        "renderer": "one_or_more",
        "key_order": Object.keys(window.nfforg.MAPenumToEnglish.arts_grants_),
        "highchart_formatting": {
          chart: { marginLeft: 400, spacingLeft: 0 }
        },
        "value_massager": function(val){
          if (val.has('know'))
            return "Don't know";
          else
            return val.replace(", please explain","").replace(/funder.s/,"funder's").replace('by a funder','');
        },
        "css": { width: FULLWIDTH }
      }

    }
    
      
  };

})();
